<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <fieldset>
        <legend>목록창</legend>
        <div id="list"></div>
    </fieldset><br>
    <!-- 문제 1 -->
    <!-- 입력 버튼을 누르면 inline 형태로 insertIngredient 호출되게 함. -->
    <!-- 출력 버튼을 누르면 inline 형태로 printIngredient 호출되게 함. -->
    <button type="button" onclick="insertIngredient();" id="insert">입력</button>
    <button type="button" onclick="printIngredient();" id="print">출력</button>
    <script>
        // 문제 2
        // 입력 버튼을 누르면 addEventListener를 사용하여 insertIngredient 호출되게 함.
        // 출력 버튼을 누르면 addEventListener를 사용하여 printIngredient 호출되게 함.
        // document.getElementById('insert').addEventListener('click', insertIngredient);
        // document.getElementById('print').addEventListener('click', printIngredient);

        var member;
        var idCount = 0;

        function insertIngredient() {
            // 문제 3
            // 재료 : // 단가 : // 수량을 prompt 창을 이용하여 입력받아 변수 ingredient, price, amount 에 각각 저장한다.
            var ingredient = window.prompt('재료 : ');
            var price = window.prompt('단가 : ');
            var amount = window.prompt('수량 : ');

            member = {
                ingredient: ingredient,
                price: price,
                amount: amount,
                info: function () {
                // 문제 4
                /* 입력받은 값이 아래와 같이 출력되도록 작성
                재료 : 당근
                단가 : 200원
                수량 : 3
                */
                    var content = "";
                    content += "재료 : " + this.ingredient + "<br>";
                    content += "단가 : " + this.price + "<br>";
                    content += "수량 : " + this.amount + "<br>";
                    return content;
                }
            }
        }
        function printIngredient() {
            // 문제 5
            // 입력된 데이터가 있다면 member.info를 이용하여 출력데이터를 list div 안에 p태그로 하나씩 추가되고, 해당 p 태그 다음(형제 개념)에 삭제버튼도 추가
            if (member != undefined && member.ingredient != "" && member.price != "" && member.amount != "") {
                idCount++;

                var pEle = document.createElement('p');
                var btnEle = document.createElement('button');
                btnEle.setAttribute("id", "delete_" + idCount);
                btnEle.innerText = "삭제";

                pEle.innerHTML = member.info();
                document.getElementById('list').appendChild(pEle);
                document.getElementById('list').appendChild(btnEle);

                document.getElementById("delete_" + idCount).addEventListener('click', function(){
                    this.previousSibling.remove();
                    this.remove();
                })
            } else {
                alert("입력을 먼저 진행해주세요");
            }
        }
    </script>
</body>
</html>