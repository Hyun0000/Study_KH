<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        #a3{
            background-color: greenyellow;
        }
    </style>
    <title>timer show hide</title>
</head>
<body>
    <h1>Stop Watch</h1>
    <button type="button" id="btnStart">시작하기</button>
    <button type="button" id="btnPause">멈추기</button>
    <button type="button" id="btnRecord">기록</button>
    <button type="button" id="btnStop">정지</button>
    <div id="a1"></div>
    <hr>
    <h1>기록</h1>
    <div id="a3">
        <button id="btnShowHide">접기</button>
    </div>
    <hr>
    <h1>현재시간</h1>
    <div id="a2"></div>

    <script>
        $('#btnShowHide').hide(); // 로드시 버튼 자체를 안 보이게한다.
        // 기록 버튼을 누르면 이것이 보이게해보자

        // onload 필요없다. --> $(function () {}) by 위치
        // 교재 143p, window.setInterval(); --> 앞에 window. 생략
        // $('#a1').append(contentEle);

        $('#btnStart').click(startWatch);
        $('#btnPause').click(pauseWatch);
        $('#btnRecord').click(stopRecord);
        $('#btnStop').click(stopWatch);
        $('#btnShowHide').click(function (){
            var btnInnerText = $('#btnShowHide').text().trim(); // 읽기 & 양쪽공백제거(가운데 공백은 제거 불가)
            if (btnInnerText == '펼치기') {
                $('#btnShowHide').text("접기");
                // $(this).nextAll().show();

                // 부모찾기
                // $(this).parent().find("p").show();
            } else {
                $('#btnShowHide').text("펼치기");
                $(this).nextAll().hide();

                // 칠드런
                // $(this).parent().children('p').hide();
            }
            // $(this).nextAll().toggle();
            // 토글만으로는 버튼 이름을 수정할 수 없다.
        });

        // $('#btnShow').click(function () {
        //     $(this).next().nextAll().show(500);
        //     // this --> 클릭 이벤트를 발생시킨 버튼을 의미
        //     // $(this) --> 형변환해줘야 next().nextAll().show() 들을 쓸수있다.
        //     // js의 display속성을 제이쿼리를 이용해 한 번에 지정
        //     // js는 for문 등을 이용해야 한 번에 지정가능
        //     // show(500) 애니메이션 등록도 가능
        // });
        // $('#btnHide').click(function () {
        //     $(this).nextAll().hide();
        // });

        let interval1 = 0;
        let interval2 = 0;
        let sec = 0;

        function stopRecord() { //기록
            $('#btnShowHide').show();
            var contentEle = "<p>" + sec + "초" + "</p>";
            $('#a3').append(contentEle);

        }

        function startWatch() {
            interval1 = setInterval(function () {
                sec++;
                var contentEle = "<p>" + sec + "초" + "</p>";
                $('#a1').html(contentEle);
            }, 1000);
            // setInterval 함수가 리턴값이 있는 것이다.
        }

        function pauseWatch() {
            clearInterval(interval1);
            clearInterval(interval2);
        }

        function stopWatch() {
            sec = 0;
            clearInterval(interval1);
            clearInterval(interval2);
            var contentEle = "<p>" + sec + "초</p>"
            $('#a1').html(contentEle); // 이 부분 없을때 있을떄 꼭 비교
            // 무엇을 멈출지 매개인자를 넣어줘야한다.
            // 한 화면에 타이머를 여러개 돌릴 수 있으니까
            // 그래서 interval1, sec을 전역변수로 추가한것이다.
        }

        // 임시 주석
        // interval2 = setInterval(function () {
        //     $('#a2').html(func());
        // }, 10)

        var func = function () {
            var d = new Date();
            var year = d.getFullYear();
            var month = d.getMonth() + 1;
            var date = d.getDate();
            var day = d.getDay();
            var hour = d.getHours();
            var min = d.getMinutes();
            var sec = d.getSeconds();
            var milisec = d.getMilliseconds();
            month = (month > 9 ? "" : "0") + month;
            date = (date > 9 ? "" : "0") + date;
            hour = (hour > 9 ? "" : "0") + hour;
            min = (min > 9 ? "" : "0") + min;
            sec = (sec > 9 ? "" : "0") + sec;
            var datestr;
            switch (day) {
                case 0: datestr = "일"; break;
                case 1: datestr = "월"; break;
                case 2: datestr = "화"; break;
                case 3: datestr = "수"; break;
                case 4: datestr = "목"; break;
                case 5: datestr = "금"; break;
                case 6: datestr = "토"; break;
            }
            return year + "-" + month + "-" + date + " (" + datestr + ") " + hour + ":" + min + ":" + sec + ":" + milisec;
        }



        // var sec = 0;
        // var interval = setInterval(function(){ 
        //     sec++;
        //     var contentEle = "<p>"+ sec + "초" + "</p>";
        //     $('#a1').html(contentEle);
        // }, 1000);
    </script>
</body>
</html>